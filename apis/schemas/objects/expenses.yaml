type: object
properties:
  id:
    type: string
    maxLength: 255
    example: tx12345
    description: An unique string to identify the Expense. Ignore this field when used as part of a POST request to create an Expense.
    readOnly: true
  employee_email:
    type: string
    maxLength: 127
    format: email
    description: |
      Email address of the Employee for whom the expense was/will-be created. Once an Expense is created, the value of this field cannot be changed and is immutable. <br>
    example: john.doe@example.com
  employee_id:
    $ref: 'commons/employee_id.yaml'
  employee:
    $ref: 'minimals/employees.yaml'
  spent_at:
    type: string
    format: date-time
    description: |
      RFC 3339, section 5.6 "https://tools.ietf.org/html/rfc3339#section-5.6" compliant timestamp on which the transaction for which the expense [being] fyled was made. <br>
      This date cannot be in future.
    example: '2020-07-21T17:32:28Z'
  source:
    type: string
    example: SLACK_APP
    description: |
      The name of the client app which is creating the expense.
      if its a thrid party app, it prefixed with TPA_.
      Ex - If you pass SLACK_APP, it will be saved as TPA_SLACK_APP. If not passed, source is saved as TPA.
  currency:
    type: string
    maxLength: 3
    example: USD
    description: |
      ISO 4217 currency codes that are usually of three upper case letters.
      See "https://www.iban.com/currency-codes" for examples.
      If this field is ignored during a POST call to create/update an Expense, the default currency of the organization will be used.
      To use other currency than default currency use `foreign_currency` field.
  amount:
    type: number
    description: |
      The transaction amount for which the expense was/will-be fyled.
      The amount will be in the currency that the organization is setup with in case of GET requests. <br>
      Note that, when used as part of creating an Expense via POST, the actual amount in the Expense, in a subsequent GET call, may get changed either because of policies or admin/approvers changing the amount.
    example: 1500.0
  user_amount:
    type: number
    description: |
      The transaction amount as claimed by user.
      The amount will be in the currency that the organization is setup with in case of GET requests. <br>
    example: 1984.18
  policy_amount:
    type: number
    description: |
      The transaction amount which is modified by policy.
      The amount will be in the currency that the organization is setup with in case of GET requests. <br>
    example: 1500.0
  admin_amount:
    type: number
    description: |
      The transaction amount which is modified by admin or approver.
      The amount will be in the currency that the organization is setup with in case of GET requests. <br>
      This could be null if admin or approver has not edited your expense.
    example: null
  tax:
    type: number
    description:
      Tax amount as setup by your organisation.
    deprecated: true
  foreign_currency:
    type: string
    maxLength: 3
    example: INR
    description: |
      ISO 4217 currency codes that are usually of three upper case letters.
      See "https://www.iban.com/currency-codes" for examples.
      This field is used when expense is of non-default currency of an organisation.
  foreign_amount:
    type: number
    description: |
      The transaction foriegn amount for which the expense was/will-be fyled.
      The amount will be in the currency that is mentioned in the `foriegn currncy`<br>
      Note that, if an expense of currency other default currency of an organistation is used then `amount`, `foreign_currency`, `foreign_amount` are mandatory.
    example: 138962.05
  created_by:
    type: string
    maxLength: 255
    description: |
      An unique ID, generated by Fyle, for identifying the Employee who created the expense. Once an Expense is created, the value of this field cannot be changed and is immutable. <br>
    example: ou12345Zdfx
    readOnly: true
  purpose:
    type: string
    maxLength: 1024
    description: Justification for the expense.
    example: Team lunch
  project_id:
    type: string
    description: |
      The ID generated by Fyle to uniquely identify the Project, to which the Expense belongs. <br>
    example: '1234'
  project:
    $ref: 'minimals/project.yaml'
  cost_center_id:
    type: string
    description: |
      The ID generated by Fyle to uniquely identify the CostCenter, to which the Expense belongs. <br>
    example: '4321'
  cost_centers:
    $ref: 'minimals/cost_center.yaml'
  category_id:
    type: string
    description: |
      The unique ID of a Category to which the Expense belongs. <br>
      Use `GET /api/tpa/v1/categories` to get the list of valid ID and Name of the Categories for the organization.
    example: '18'
  category:
    $ref: 'minimals/category.yaml'
  state:
    type: string
    enum:
      - 'COMPLETE'
      - 'DRAFT'
      - 'PAID'
      - 'PAYMENT_PROCESSING'
      - 'APPROVER_PENDING'
      - 'PAYMENT_PENDING'
      - 'APPROVED'
    description: The state of the Expense. This field shall be ignored in POST calls when creating/updating an Expense.
    readOnly: true
  fund_source:
    type: string
    enum:
      - 'PERSONAL'
      - 'ADVANCE'
      - 'CCC'
    description: The fund source of the Expense. This field shall be ignored in POST calls when creating/updating an Expense.
    readOnly: true
  payment_id:
    type: string
  source_account_id:
    type: string
  source_account_type:
    type: string
  invoice_number:
    type: string
    description: |
      invoice number from the receipt.
  billable:
    type: boolean
    example: true
    description: This fields marks whether a given expense is billable a not.
  reimbursable:
    type: boolean
    example: true
  created_at:
    $ref: 'commons/created_at.yaml'
  updated_at:
    $ref: 'commons/updated_at.yaml'
  expense_number:
    type: string
    description: |
      This is user visible identifier for an expense.
      This field can be used as reference in UI.
    example: 'E/2020/10/T/95'
  exchange_rate:
    type: number
    description: |
      This field determines at which rate the expenses from foriegn currency was converted to home curreny
  report_id:
    type: string
    description: |
      Unique id given by Fyle to identify an Expense Report.
  reported_at:
    type: string
    format: date-time
    description: |
      RFC 3339, section 5.6 "https://tools.ietf.org/html/rfc3339#section-5.6" compliant timestamp on which the Expense was submitted via a Report to the Approvers.
      If the Expense is not added to a Report yet or if the Report is not yet submitted, this could be null.
  report:
    $ref: 'minimals/report.yaml'
  physical_bill:
    type: boolean
    description: |
      This field indicated whether physicall bill was received or not.
    example: true
  physical_bill_at:
    type: string
    format: date-time
    description: |
      RFC 3339, section 5.6 "https://tools.ietf.org/html/rfc3339#section-5.6" compliant timestamp indicating when the Expense's physicall bill was submitted.
      If the Expense's bill is not required to be submitted, then this could be null.
  verified:
    type: boolean
    description: |
      Indicates whether the Expense is verified or not
    readOnly: true
  verification_state:
    type: string
  verified_at:
    type: string
    format: date-time
    description: |
      RFC 3339, section 5.6 "https://tools.ietf.org/html/rfc3339#section-5.6" compliant timestamp on which the Expense was verified.
      If the Expense is not verified yet, this could be null. <br>
    readOnly: true
  skip_reimbursement:
    type: boolean
    deprecated: true
  vendor:
    type: string
    example: Uber
    maxLength: 255
    description: |
      String denoting the name of the vendor to which the Expense was made
  vendor_id:
    type: string
    example: '24242r'
    maxLength: 255
    description: |
      String denoting the id of the vendor to which the Expense was made
  locations:
    description: |
      This field will be present for travel related categories. To add to and from location to you travel category related expenses add two locations in schema given below.
    type: array
    items:
      $ref: 'location.yaml'
  train_travel_class:
    description: |
      This field is applicable for only Train category.
    type: string
    example: string
  flight_journey_travel_class:
    description: |
      This field is applicable only for flight category. Can be `BUSINESS`, `ECONOMY`, `FIRST_CLASS`
    type: string
    example: 'ECONOMY'
  flight_return_travel_class:
    description: |
      This field is applicable only for flight category. Can be `BUSINESS`, `ECONOMY`, `FIRST_CLASS`
    type: string
    example: 'BUSINESS'
  bus_travel_class:
    description: |
      This field is applicable only for bus category.
    type: string
    example: 'AC'
  from_dt:
    description: |
      This field is only relevant for travel related categories. This represents the onward date.
    type: string
    example: '2019-07-17T00:00:00.000Z'
  to_dt:
    description: |
      This field is only relevant for travel related categories. This represents the return date.
    type: string
    example: '2019-07-27T00:00:00.000Z'
  distance:
    type: number
  distance_unit:
    type: string
  num_days:
    type: integer
  mileage_calculated_distance:
    type: number
  mileage_calculated_amount:
    type: number
  mileage_vehicle_type:
    type: string
  mileage_rate:
    type: number
  mileage_is_round_trip:
    type: boolean
  hotel_is_breakfast_provided:
    type: boolean
  per_diem_rate_id:
    type: string
  per_diem_rate:
    $ref: 'minimals/perdiem.yaml'
  activity_details:
    type: string
  activity_policy_pending:
    type: boolean
  num_files:
    type: integer
    description: |
      Number of files attached to this Expenses.
  has_attachments:
    type: boolean
    description: |
      Returns if there are file attachments that the Expense has. Usually the image of the receipts are added as attachments to the Expenses.
    readOnly: true
  attachments:
    description: |
      Returns expense attachments. <br>
      This field will not be present in the response for the GET method on the `/api/tpa/v1/expenses` call.
    type: array
    items:
      $ref: 'minimals/file.yaml'
  custom_properties:
    $ref: 'custom_properties.yaml'
  user_can_delete:
    type: boolean
    description: |
      This field describes whether a user can delete this expenses.
      This is flag is set as false when travel agent creates expenses on your behalf.
    example: true
  policy_flag:
    type: boolean
    description:
      This field indicates whether policy execution has flagged this expenses or not.
    example: false
  manual_flag:
    type: boolean
    description: |
      This field indicates whether this expenses was manually flagged by approver or finance or admin.
    example: true
  policy_state:
    type: string
    enum:
      - FAILED
      - SUCCESS
      - RUNNING
    description: |
      This fields shows policy execution state for this expenses.
      If this field is null then its policy has not yet run on this expenses.
  extracted_data:
    type: object
  transcribed_data:
    type: object
  user_review_needed:
    type: boolean
  mandatory_fields_present:
    type: boolean
  transcription_state:
    type: string
    enum:
      - IN_PROGRESS
      - SUCCESS
      - FAILURE
      - NO_WORK
    example: SUCCESS
  receipt_required:
    type: boolean
  is_holiday_expense:
    type: boolean
  risk_state:
    type: string
    enum:
      - HIGH_RISK
      - MODERATE_RISK
      - NO_RISK
    example: NO_RISK
  external_id:
    type: string
  split_group_id:
    type: string
  split_group_user_amount:
    type: string
  external_expense:
    type: object
  corporate_credit_card_transaction:
    type: object
  transaction_approvals:
    allOf:
      - $ref: 'commons/approvals.yaml'
    example:
      ougelgneget:
        state: APPROVED
      ougo3nlwfgg:
        state: APPROVAL_PENDING
  org_id:
    $ref: 'commons/org_id.yaml'
  org_name:
    $ref: 'commons/org_name.yaml'
  actions:
    $ref: 'expense_actions.yaml'
